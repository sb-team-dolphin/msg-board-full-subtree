name: Backend CI/CD Pipeline

on:
  push:
    branches:
      - main
      - develop
    paths:
      - 'backend/**'
      - '.github/workflows/backend-ci-cd.yml'
  workflow_dispatch:

env:
  AWS_REGION: ap-northeast-2
  ECR_REPOSITORY: myapp-backend
  ECS_SERVICE: myapp-backend-service
  ECS_CLUSTER: myapp-cluster
  ECS_TASK_DEFINITION_FAMILY: myapp-backend-task
  CONTAINER_NAME: backend

jobs:
  # ============================================
  # CI Stage: Build & Test
  # ============================================
  build-and-test:
    name: Build and Test
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Notify pipeline start
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*üöÄ CI/CD Pipeline Started* by ${{ github.actor }}\n‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è Building and Testing..."
                }
              },
              {
                "type": "image",
                "image_url": "https://38.media.tumblr.com/f36cd9a0381bad952ddd723a5dcac451/tumblr_nf5sk5Mn7d1u3w4uoo1_400.gif",
                "alt_text": "pipeline start"
              },
              {
                "type": "context",
                "elements": [
                  {
                    "type": "mrkdwn",
                    "text": "Branch: `${{ github.ref_name }}` | Commit: `${{ github.sha }}`\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Logs>"
                  }
                ]
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: 'maven'

      - name: Build with Maven
        working-directory: ./backend
        run: mvn clean package -DskipTests

      - name: Run tests
        working-directory: ./backend
        run: mvn test

      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: test-results
          path: backend/target/surefire-reports/

      - name: Upload JAR artifact
        uses: actions/upload-artifact@v4
        with:
          name: app-jar
          path: backend/target/*.jar

      - name: Notify build success
        if: success()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*üöÄ Build Started* by ${{ github.actor }}\nüü©‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è Tests Passed & Build Complete"
                }
              },
              {
                "type": "image",
                "image_url": "https://i2.ruliweb.com/ori/17/01/18/159aff086ef6c966.gif",
                "alt_text": "build success"
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Notify build failure
        if: failure()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*üö® Build or Test Failed*\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|Check Logs Now>"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≤‚¢Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†Ñ‚†Ç‚¢â‚†§‚†ê‚†ã‚†à‚†°‚°à‚†â‚†ê‚††‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚¢†‚£§‚†î‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢¢‚†Ä‚†Ä‚†à‚†±‚°§‚£§‚†Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†∞‚†Å‚†Ä‚£∞‚£ø‚†É‚†Ä‚¢†‚†É‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚†Ä‚†à‚¢û‚£¶‚°Ä‚†à‚°á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚¢á‚£†‚°ø‚†Å‚†Ä‚¢Ä‚°É‚†Ä‚£à‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¢‚†∞‚†Ä‚†Ä‚¢∫‚£ß‚¢∞‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†à‚£ø‚†Å‚°ò‚†Ä‚°å‚°á‚†Ä‚°ø‚†∏‚†Ä‚†Ä‚†Ä‚†à‚°ï‚°Ñ‚†Ä‚†ê‚°Ä‚†à‚†Ä‚¢É‚†Ä‚†Ä‚†æ‚†á‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†á‚°á‚†É‚¢†‚†Ä‚†∂‚°Ä‚°á‚¢É‚†°‚°Ä‚†Ä‚†Ä‚†°‚†à‚¢Ç‚°Ä‚¢Å‚†Ä‚°Å‚†∏‚†Ä‚°Ü‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†∏‚†Ä‚¢∏‚†Ä‚†ò‚°ú‚†Ä‚£ë‚¢¥‚£Ä‚†ë‚†Ø‚°Ç‚†Ñ‚£Ä‚££‚¢Ä‚£à‚¢∫‚°ú‚¢£‚†Ä‚°Ü‚°á‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†á‚†Ä‚¢∏‚†Ä‚°ó‚£∞‚°ø‚°ª‚†ø‚°≥‚°Ö‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚°µ‚†ø‚†ø‚°ª‚£∑‚°°‚°á‚°á‚†Ä‚¢∏‚£á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚¢∞‚†Ä‚†Ä‚°Ü‚°Ñ‚£ß‚°è‚†∏‚¢†‚¢≤‚¢∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†ê‚¢ô‚¢∞‚†Ç‚¢°‚†ò‚£á‚°á‚†É‚†Ä‚†Ä‚¢π‚°Ñ‚†Ä‚†Ä\n‚†Ä‚†Ä‚†ü‚†Ä‚†Ä‚¢∞‚¢Å‚°á‚†á‚†∞‚£Ä‚¢Å‚°ú‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£Ä‚£Å‚†å‚†Ä‚†É‚†∞‚†Ä‚†Ä‚†Ä‚†à‚†∞‚†Ä‚†Ä\n‚†Ä‚°ò‚†Ä‚†Ä‚†Ä‚†Ä‚¢ä‚£§‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚¢∏‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†É‚†Ä\n‚¢†‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†Ä\n‚†ò‚†∏‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†é‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Ä‚†Ä‚°á\n‚†Ä‚†á‚¢Ü‚¢É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°è‚¢≤‚¢§‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†Ñ‚°ö‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä‚†Ä\n‚¢∞‚†à‚¢å‚¢é‚¢Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚£å‚†Ü‚°∞‚°Å‚†â‚†â‚†Ä‚†â‚†Å‚°±‚°ò‚°º‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚¢¨‚†É‚¢†‚†Ä‚°Ü\n‚†Ä‚¢¢‚†Ä‚†ë‚¢µ‚£ß‚°Ä‚†Ä‚†Ä‚°ø‚†≥‚†Ç‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚¢∫‚°Ä‚†Ä‚†Ä‚¢Ä‚¢†‚£Æ‚†É‚¢Ä‚†Ü‚°∞‚†Ä\n‚†Ä‚†Ä‚†ë‚†Ñ‚£Ä‚†ô‚°≠‚†¢‚¢Ä‚°Ä‚†Ä‚†Å‚†Ñ‚£Ä‚£Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚°†‚†Ç‚¢É‚°Ä‚†î‚†±‚°û‚¢Å‚†Ñ‚£Å‚†î‚†Å‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # ============================================
  # Docker Build & Push to ECR
  # ============================================
  build-and-push:
    name: Build Docker Image and Push to ECR
    runs-on: ubuntu-latest
    needs: build-and-test
    outputs:
      image: ${{ steps.build-image.outputs.image }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Download JAR artifact
        uses: actions/download-artifact@v4
        with:
          name: app-jar
          path: backend/target/

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ env.AWS_REGION }}

      - name: Login to Amazon ECR
        id: login-ecr
        uses: aws-actions/amazon-ecr-login@v2

      - name: Build, tag, and push image to Amazon ECR
        id: build-image
        env:
          ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
          IMAGE_TAG: ${{ github.sha }}
        working-directory: ./backend
        run: |
          # Docker Ïù¥ÎØ∏ÏßÄ ÎπåÎìú
          docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG .
          docker tag $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG $ECR_REGISTRY/$ECR_REPOSITORY:latest

          # ECRÏóê Ïù¥ÎØ∏ÏßÄ Push
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:latest

          # Îã§Ïùå JobÏóêÏÑú ÏÇ¨Ïö©Ìï† Ïù¥ÎØ∏ÏßÄ URI Ï∂úÎ†•
          echo "image=$ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG" >> $GITHUB_OUTPUT

      - name: Notify image push success
        if: success()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*üê≥ Docker Image Pushed to ECR*\nüü©üü©‚¨úÔ∏è‚¨úÔ∏è Deploying to ECS..."
                }
              },
              {
                "type": "image",
                "image_url": "https://i2.ruliweb.com/ori/17/01/13/15997d302a347f42c.gif",
                "alt_text": "docker push success"
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Notify image push failure
        if: failure()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*üö® Docker Build/Push Failed*\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|Check Logs Now>"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≤‚¢Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†Ñ‚†Ç‚¢â‚†§‚†ê‚†ã‚†à‚†°‚°à‚†â‚†ê‚††‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚¢†‚£§‚†î‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢¢‚†Ä‚†Ä‚†à‚†±‚°§‚£§‚†Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†∞‚†Å‚†Ä‚£∞‚£ø‚†É‚†Ä‚¢†‚†É‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚†Ä‚†à‚¢û‚£¶‚°Ä‚†à‚°á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚¢á‚£†‚°ø‚†Å‚†Ä‚¢Ä‚°É‚†Ä‚£à‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¢‚†∞‚†Ä‚†Ä‚¢∫‚£ß‚¢∞‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†à‚£ø‚†Å‚°ò‚†Ä‚°å‚°á‚†Ä‚°ø‚†∏‚†Ä‚†Ä‚†Ä‚†à‚°ï‚°Ñ‚†Ä‚†ê‚°Ä‚†à‚†Ä‚¢É‚†Ä‚†Ä‚†æ‚†á‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†á‚°á‚†É‚¢†‚†Ä‚†∂‚°Ä‚°á‚¢É‚†°‚°Ä‚†Ä‚†Ä‚†°‚†à‚¢Ç‚°Ä‚¢Å‚†Ä‚°Å‚†∏‚†Ä‚°Ü‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†∏‚†Ä‚¢∏‚†Ä‚†ò‚°ú‚†Ä‚£ë‚¢¥‚£Ä‚†ë‚†Ø‚°Ç‚†Ñ‚£Ä‚££‚¢Ä‚£à‚¢∫‚°ú‚¢£‚†Ä‚°Ü‚°á‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†á‚†Ä‚¢∏‚†Ä‚°ó‚£∞‚°ø‚°ª‚†ø‚°≥‚°Ö‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚°µ‚†ø‚†ø‚°ª‚£∑‚°°‚°á‚°á‚†Ä‚¢∏‚£á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚¢∞‚†Ä‚†Ä‚°Ü‚°Ñ‚£ß‚°è‚†∏‚¢†‚¢≤‚¢∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†ê‚¢ô‚¢∞‚†Ç‚¢°‚†ò‚£á‚°á‚†É‚†Ä‚†Ä‚¢π‚°Ñ‚†Ä‚†Ä\n‚†Ä‚†Ä‚†ü‚†Ä‚†Ä‚¢∞‚¢Å‚°á‚†á‚†∞‚£Ä‚¢Å‚°ú‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£Ä‚£Å‚†å‚†Ä‚†É‚†∞‚†Ä‚†Ä‚†Ä‚†à‚†∞‚†Ä‚†Ä\n‚†Ä‚°ò‚†Ä‚†Ä‚†Ä‚†Ä‚¢ä‚£§‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚¢∏‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†É‚†Ä\n‚¢†‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†Ä\n‚†ò‚†∏‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†é‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Ä‚†Ä‚°á\n‚†Ä‚†á‚¢Ü‚¢É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°è‚¢≤‚¢§‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†Ñ‚°ö‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä‚†Ä\n‚¢∞‚†à‚¢å‚¢é‚¢Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚£å‚†Ü‚°∞‚°Å‚†â‚†â‚†Ä‚†â‚†Å‚°±‚°ò‚°º‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚¢¨‚†É‚¢†‚†Ä‚°Ü\n‚†Ä‚¢¢‚†Ä‚†ë‚¢µ‚£ß‚°Ä‚†Ä‚†Ä‚°ø‚†≥‚†Ç‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚¢∫‚°Ä‚†Ä‚†Ä‚¢Ä‚¢†‚£Æ‚†É‚¢Ä‚†Ü‚°∞‚†Ä\n‚†Ä‚†Ä‚†ë‚†Ñ‚£Ä‚†ô‚°≠‚†¢‚¢Ä‚°Ä‚†Ä‚†Å‚†Ñ‚£Ä‚£Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚°†‚†Ç‚¢É‚°Ä‚†î‚†±‚°û‚¢Å‚†Ñ‚£Å‚†î‚†Å‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # ============================================
  # CD Stage: Deploy to ECS
  # ============================================
  deploy:
    name: Deploy to ECS
    runs-on: ubuntu-latest
    needs: build-and-push

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ env.AWS_REGION }}

      - name: Download current task definition
        run: |
          aws ecs describe-task-definition \
            --task-definition ${{ env.ECS_TASK_DEFINITION_FAMILY }} \
            --query taskDefinition > task-definition.json

      - name: Fill in the new image ID in the Amazon ECS task definition
        id: task-def
        uses: aws-actions/amazon-ecs-render-task-definition@v1
        with:
          task-definition: task-definition.json
          container-name: ${{ env.CONTAINER_NAME }}
          image: ${{ needs.build-and-push.outputs.image }}

      - name: Deploy Amazon ECS task definition
        uses: aws-actions/amazon-ecs-deploy-task-definition@v1
        with:
          task-definition: ${{ steps.task-def.outputs.task-definition }}
          service: ${{ env.ECS_SERVICE }}
          cluster: ${{ env.ECS_CLUSTER }}
          wait-for-service-stability: true

      - name: Notify deploy success
        if: success()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*‚úÖ Deploy Complete*\nüü©üü©üü©üü© Live on ECS Production"
                }
              },
              {
                "type": "section",
                text": {
                  "type": "mrkdwn",
                  "text": "Your backend service has been successfully deployed to ECS!\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†ì‚†∂‚£§‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†∂‚£Ñ‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†á‚†Ä‚¢†‚°è‚†Ä‚†Ä‚¢Ä‚°î‚†â‚†Ä‚¢à‚°ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†©‚†§‚£Ñ‚£º‚†Å‚†Ä‚£†‚†ü‚†Ä‚†Ä‚£†‚†è‚†Ä‚†Ä‚¢Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚£Ä‚£Ä‚£Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚†£‚£§‚£Ä‚°º‚†É‚†Ä‚¢Ä‚°¥‚†ã‚†à‚†≥‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚£¥‚£∂‚£ø‚°ø‚†ø‚†ø‚†ü‚†õ‚†õ‚†õ‚†õ‚†ø‚†ø‚£ø‚£ø‚£∂‚£§‚£Ñ‚†Ä‚†Ä‚†Ä‚†â‚†Ä‚¢Ä‚°¥‚†ã‚†Ä‚†Ä‚£†‚†û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£¥‚£æ‚£ø‚†ø‚†ã‚†â‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†â‚†ª‚¢ø‚£ø‚£∂‚£Ñ‚†Ä‚†Ä‚†≥‚£Ñ‚†Ä‚£†‚†û‚¢Å‚°†‚¢∂‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚£æ‚£ø‚†ø‚†ã‚†Ä‚†Ä‚¢Ä‚£¥‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ë‚¢§‚°à‚†õ‚¢ø‚£ø‚£¶‚°Ä‚†à‚†õ‚¢°‚†ö‚†É‚†Ä‚†Ä‚¢π‚°Ü‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£º‚£ø‚†ü‚†Å‚†Ä‚†Ä‚†Ä‚¢Ä‚£æ‚†É‚†Ä‚†Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢ª‚°Ü‚†Ä‚†Ä‚¢ª‚£¶‚†Ä‚†ô‚¢ø‚£ø‚£¶‚°Ä‚†à‚¢∂‚£Ä‚°¥‚†û‚†ã‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚£ø‚°ø‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£æ‚°á‚¢Ä‚°Ñ‚†Ä‚¢∏‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚†Ä‚¢∏‚£∑‚°Ä‚†Ä‚†Ä‚†π‚£∑‚°Ä‚†Ä‚†ô‚¢ø‚£∑‚°Ä‚†Ä‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£∞‚£ø‚°ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚£ø‚†É‚£º‚°á‚†Ä‚¢∏‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚†Ä‚¢∏‚£ø‚£∑‚°Ä‚†Ä‚¢Ä‚£æ‚£ø‚°§‚†ê‚†ä‚¢ª‚£ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚£ø‚£ø‚£º‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚£ø‚†â‚¢†‚£ø‚†ß‚†Ä‚£∏‚£á‚£†‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚††‚¢∏‚°ü‚†π‚£ø‚°ç‚†â‚£ø‚£ø‚£ß‚†Ä‚†Ä‚†Ä‚†ª‚£ø‚£∂‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚£ø‚°ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£º‚°è‚¢†‚°ø‚£ø‚£¶‚£§‚£ø‚°ø‚£ø‚°á‚†Ä‚†Ä‚†Ä‚¢∏‚°ø‚†ª‚£ø‚£ß‚£§‚£º‚£ø‚°Ñ‚¢∏‚°ø‚£ø‚°á‚†Ä‚†Ä‚¢†‚£å‚†õ‚¢ø‚£ø‚£∂‚£§‚£§‚£Ñ‚°Ä\n‚†Ä‚†Ä‚†Ä‚£Ä‚£§‚£ø‚£ø‚†ü‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚¢É‚£ø‚†á‚¢ø‚£Ø‚£ø‚£ø‚£á‚£ø‚†Å‚†Ä‚†Ä‚†Ä‚£æ‚°á‚¢∏‚£ø‚†É‚†â‚†Å‚†∏‚£ø‚£º‚°á‚¢ª‚°á‚†Ä‚†Ä‚†Ä‚¢ø‚£∑‚£∂‚£¨‚£≠‚£ø‚£ø‚£ø‚†á\n‚£æ‚£ø‚£ø‚£ø‚£ø‚£ª‚£•‚£æ‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚£ø‚†á‚†Ä‚†ò‚†ø‚†ã‚†ª‚†ø‚†ø‚†∂‚†∂‚†æ‚†ø‚†ø‚†ç‚¢õ‚£ß‚£∞‚†∂‚¢Ä‚£Ä‚£º‚£ø‚£¥‚°∏‚£ø‚†Ä‚†Ä‚†Ä‚†∏‚£ø‚£ø‚£ø‚†â‚†õ‚†â‚†Ä‚†Ä\n‚†ò‚†õ‚†ø‚†ø‚¢ø‚£ø‚†â‚£ø‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£ø‚°ø‚£∂‚£∂‚£∂‚£§‚£§‚£§‚£Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£≠‚£∂‚£ø‚°ø‚†ü‚†ã‚†â‚†Ä‚†Ä‚£ø‚†Ä‚°Ä‚°Ä‚†Ä‚£ø‚£ø‚£ø‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚£º‚£ø‚†Ä‚£ø‚†Ä‚†Ä‚†∏‚†Ä‚†Ä‚†∏‚£ø‚†á‚†Ä‚†Ä‚£à‚£©‚£≠‚£ø‚°ø‚†ü‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†õ‚†õ‚†õ‚†õ‚†ª‚†ø‚†∑‚†Ü‚†Ä‚£Ø‚†Ä‚†á‚°á‚†Ä‚£ø‚°è‚£ø‚£ß‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢ø‚£ø‚°Ä‚£ø‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚†∞‚†ø‚†ø‚†õ‚†ã‚†â‚†Ä‚†Ä‚¢Ä‚£¥‚£∂‚£∂‚£∂‚£∂‚£∂‚£¶‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚£ß‚†Ä‚†Ä‚†Ä‚£ø‚°á‚£ø‚£ø‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚°á‚¢ª‚£á‚†Ä‚†ò‚£∞‚°Ä‚†Ä‚£ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ø‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚£ø‚†Ä‚†Ä‚†Ä‚£ø‚£ß‚£ø‚°ø‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£ø‚£ß‚¢∏‚£ø‚°Ä‚†Ä‚°ø‚£ß‚†Ä‚£ø‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚°Ñ‚†Ä‚†Ä‚†Ä‚£º‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£§‚£æ‚°ü‚¢°‚£∂‚†Ä‚¢†‚£ø‚£ø‚£ø‚†É‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†π‚£ø‚£ø‚£ø‚£∑‚†Ä‚†á‚¢π‚£∑‚°∏‚£ø‚£∂‚£¶‚£Ñ‚£Ä‚°Ä‚†Ä‚†Ä‚†Ä‚£ø‚°á‚†Ä‚†Ä‚¢†‚£ø‚†Å‚£Ä‚£Ä‚£†‚£§‚£∂‚£æ‚°ø‚¢ø‚£ø‚°á‚£º‚£ø‚¢Ä‚£ø‚£ø‚†ø‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†õ‚†õ‚£ø‚£∑‚£¥‚†Ä‚¢π‚£ø‚£ø‚£ø‚°ü‚†ø‚†ø‚£ø‚£ø‚£ø‚£ø‚£æ‚£∑‚£∂‚£ø‚£ø‚£ø‚£ø‚°ø‚†ø‚†ü‚†õ‚†ã‚†â‚†Ä‚¢∏‚£ø‚£ø‚£ø‚£ø‚£æ‚£ø‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ø‚£ø‚£¶‚£ò‚£ø‚°ø‚£ø‚£ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚†õ‚†õ‚†ª‚†ø‚†ã‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†ª‚£ø‚£ø‚£ø‚†à‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n"
                }
              },
              {
                "type": "context",
                "elements": [
                  {
                    "type": "mrkdwn",
                    "text": "<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Logs>"
                  }
                ]
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Notify deploy failure
        if: failure()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*üö® Deploy Failed*\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|Check Logs Now>"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≤‚¢Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†Ñ‚†Ç‚¢â‚†§‚†ê‚†ã‚†à‚†°‚°à‚†â‚†ê‚††‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚¢†‚£§‚†î‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢¢‚†Ä‚†Ä‚†à‚†±‚°§‚£§‚†Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†∞‚†Å‚†Ä‚£∞‚£ø‚†É‚†Ä‚¢†‚†É‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚†Ä‚†à‚¢û‚£¶‚°Ä‚†à‚°á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚¢á‚£†‚°ø‚†Å‚†Ä‚¢Ä‚°É‚†Ä‚£à‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¢‚†∞‚†Ä‚†Ä‚¢∫‚£ß‚¢∞‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†à‚£ø‚†Å‚°ò‚†Ä‚°å‚°á‚†Ä‚°ø‚†∏‚†Ä‚†Ä‚†Ä‚†à‚°ï‚°Ñ‚†Ä‚†ê‚°Ä‚†à‚†Ä‚¢É‚†Ä‚†Ä‚†æ‚†á‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†á‚°á‚†É‚¢†‚†Ä‚†∂‚°Ä‚°á‚¢É‚†°‚°Ä‚†Ä‚†Ä‚†°‚†à‚¢Ç‚°Ä‚¢Å‚†Ä‚°Å‚†∏‚†Ä‚°Ü‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†∏‚†Ä‚¢∏‚†Ä‚†ò‚°ú‚†Ä‚£ë‚¢¥‚£Ä‚†ë‚†Ø‚°Ç‚†Ñ‚£Ä‚££‚¢Ä‚£à‚¢∫‚°ú‚¢£‚†Ä‚°Ü‚°á‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†á‚†Ä‚¢∏‚†Ä‚°ó‚£∞‚°ø‚°ª‚†ø‚°≥‚°Ö‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚°µ‚†ø‚†ø‚°ª‚£∑‚°°‚°á‚°á‚†Ä‚¢∏‚£á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚¢∞‚†Ä‚†Ä‚°Ü‚°Ñ‚£ß‚°è‚†∏‚¢†‚¢≤‚¢∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†ê‚¢ô‚¢∞‚†Ç‚¢°‚†ò‚£á‚°á‚†É‚†Ä‚†Ä‚¢π‚°Ñ‚†Ä‚†Ä\n‚†Ä‚†Ä‚†ü‚†Ä‚†Ä‚¢∞‚¢Å‚°á‚†á‚†∞‚£Ä‚¢Å‚°ú‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£Ä‚£Å‚†å‚†Ä‚†É‚†∞‚†Ä‚†Ä‚†Ä‚†à‚†∞‚†Ä‚†Ä\n‚†Ä‚°ò‚†Ä‚†Ä‚†Ä‚†Ä‚¢ä‚£§‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚¢∏‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†É‚†Ä\n‚¢†‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†Ä\n‚†ò‚†∏‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†é‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Ä‚†Ä‚°á\n‚†Ä‚†á‚¢Ü‚¢É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°è‚¢≤‚¢§‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†Ñ‚°ö‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä‚†Ä\n‚¢∞‚†à‚¢å‚¢é‚¢Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚£å‚†Ü‚°∞‚°Å‚†â‚†â‚†Ä‚†â‚†Å‚°±‚°ò‚°º‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚¢¨‚†É‚¢†‚†Ä‚°Ü\n‚†Ä‚¢¢‚†Ä‚†ë‚¢µ‚£ß‚°Ä‚†Ä‚†Ä‚°ø‚†≥‚†Ç‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚¢∫‚°Ä‚†Ä‚†Ä‚¢Ä‚¢†‚£Æ‚†É‚¢Ä‚†Ü‚°∞‚†Ä\n‚†Ä‚†Ä‚†ë‚†Ñ‚£Ä‚†ô‚°≠‚†¢‚¢Ä‚°Ä‚†Ä‚†Å‚†Ñ‚£Ä‚£Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚°†‚†Ç‚¢É‚°Ä‚†î‚†±‚°û‚¢Å‚†Ñ‚£Å‚†î‚†Å‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
