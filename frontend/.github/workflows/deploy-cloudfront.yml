name: Deploy to CloudFront

on:
  push:
    branches: [main]
  workflow_dispatch:

env:
  AWS_REGION: ap-northeast-2

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Notify pipeline start
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*[FRONTEND] üöÄ CI/CD Pipeline Started* by ${{ github.actor }}\n‚¨úÔ∏è‚¨úÔ∏è‚¨úÔ∏è Linting and Deploying..."
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n ‚ïë  FRONTEND ‚ïë\n ‚ïë   ‚îå‚îÄ‚îê     ‚ïë\n ‚ïë   ‚îÇ ‚îÇ ‚ö°  ‚ïë\n ‚ïë   ‚îî‚îÄ‚îò     ‚ïë\n ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n  STARTING...\n```"
                }
              },
              {
                "type": "context",
                "elements": [
                  {
                    "type": "mrkdwn",
                    "text": "Branch: `${{ github.ref_name }}` | Commit: `${{ github.sha }}`\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Logs>"
                  }
                ]
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run ESLint
        run: npm run lint

      - name: Check code formatting
        run: npm run format:check

      - name: Notify lint success
        if: success()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*[FRONTEND] ‚úÖ Lint Complete*\nüü©‚¨úÔ∏è‚¨úÔ∏è Code quality checks passed"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n    ___\n   / _ \\\n  | | | |\n  | |_| |\n   \\___/\n  CODE OK!\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Notify lint failure
        if: failure()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*[FRONTEND] üö® Lint Failed*\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|Check Logs Now>"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≤‚¢Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†Ñ‚†Ç‚¢â‚†§‚†ê‚†ã‚†à‚†°‚°à‚†â‚†ê‚††‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚¢†‚£§‚†î‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢¢‚†Ä‚†Ä‚†à‚†±‚°§‚£§‚†Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†∞‚†Å‚†Ä‚£∞‚£ø‚†É‚†Ä‚¢†‚†É‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚†Ä‚†à‚¢û‚£¶‚°Ä‚†à‚°á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚¢á‚£†‚°ø‚†Å‚†Ä‚¢Ä‚°É‚†Ä‚£à‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¢‚†∞‚†Ä‚†Ä‚¢∫‚£ß‚¢∞‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†à‚£ø‚†Å‚°ò‚†Ä‚°å‚°á‚†Ä‚°ø‚†∏‚†Ä‚†Ä‚†Ä‚†à‚°ï‚°Ñ‚†Ä‚†ê‚°Ä‚†à‚†Ä‚¢É‚†Ä‚†Ä‚†æ‚†á‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†á‚°á‚†É‚¢†‚†Ä‚†∂‚°Ä‚°á‚¢É‚†°‚°Ä‚†Ä‚†Ä‚†°‚†à‚¢Ç‚°Ä‚¢Å‚†Ä‚°Å‚†∏‚†Ä‚°Ü‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†∏‚†Ä‚¢∏‚†Ä‚†ò‚°ú‚†Ä‚£ë‚¢¥‚£Ä‚†ë‚†Ø‚°Ç‚†Ñ‚£Ä‚££‚¢Ä‚£à‚¢∫‚°ú‚¢£‚†Ä‚°Ü‚°á‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†á‚†Ä‚¢∏‚†Ä‚°ó‚£∞‚°ø‚°ª‚†ø‚°≥‚°Ö‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚°µ‚†ø‚†ø‚°ª‚£∑‚°°‚°á‚°á‚†Ä‚¢∏‚£á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚¢∞‚†Ä‚†Ä‚°Ü‚°Ñ‚£ß‚°è‚†∏‚¢†‚¢≤‚¢∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†ê‚¢ô‚¢∞‚†Ç‚¢°‚†ò‚£á‚°á‚†É‚†Ä‚†Ä‚¢π‚°Ñ‚†Ä‚†Ä\n‚†Ä‚†Ä‚†ü‚†Ä‚†Ä‚¢∞‚¢Å‚°á‚†á‚†∞‚£Ä‚¢Å‚°ú‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£Ä‚£Å‚†å‚†Ä‚†É‚†∞‚†Ä‚†Ä‚†Ä‚†à‚†∞‚†Ä‚†Ä\n‚†Ä‚°ò‚†Ä‚†Ä‚†Ä‚†Ä‚¢ä‚£§‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚¢∏‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†É‚†Ä\n‚¢†‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†Ä\n‚†ò‚†∏‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†é‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Ä‚†Ä‚°á\n‚†Ä‚†á‚¢Ü‚¢É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°è‚¢≤‚¢§‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†Ñ‚°ö‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä‚†Ä\n‚¢∞‚†à‚¢å‚¢é‚¢Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚£å‚†Ü‚°∞‚°Å‚†â‚†â‚†Ä‚†â‚†Å‚°±‚°ò‚°º‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚¢¨‚†É‚¢†‚†Ä‚°Ü\n‚†Ä‚¢¢‚†Ä‚†ë‚¢µ‚£ß‚°Ä‚†Ä‚†Ä‚°ø‚†≥‚†Ç‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚¢∫‚°Ä‚†Ä‚†Ä‚¢Ä‚¢†‚£Æ‚†É‚¢Ä‚†Ü‚°∞‚†Ä\n‚†Ä‚†Ä‚†ë‚†Ñ‚£Ä‚†ô‚°≠‚†¢‚¢Ä‚°Ä‚†Ä‚†Å‚†Ñ‚£Ä‚£Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚°†‚†Ç‚¢É‚°Ä‚†î‚†±‚°û‚¢Å‚†Ñ‚£Å‚†î‚†Å‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  deploy:
    runs-on: ubuntu-latest
    needs: lint
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v4
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ env.AWS_REGION }}

      - name: Find CloudFront distribution
        id: find-cf
        run: |
          DISTRIBUTION_ID=$(aws cloudfront list-distributions \
            --query "DistributionList.Items[?Comment=='feedback-app-frontend'].Id | [0]" \
            --output text)

          if [ -z "$DISTRIBUTION_ID" ] || [ "$DISTRIBUTION_ID" = "None" ]; then
            echo "‚ùå CloudFront distribution not found!"
            echo "Please create the CloudFront distribution first."
            exit 1
          fi

          echo "distribution_id=$DISTRIBUTION_ID" >> $GITHUB_OUTPUT
          echo "‚úÖ Found distribution: $DISTRIBUTION_ID"

      - name: Get S3 bucket name
        id: get-bucket
        run: |
          BUCKET_DOMAIN=$(aws cloudfront get-distribution \
            --id ${{ steps.find-cf.outputs.distribution_id }} \
            --query "Distribution.DistributionConfig.Origins.Items[?contains(DomainName, 's3')].DomainName | [0]" \
            --output text)

          BUCKET_NAME=${BUCKET_DOMAIN%%.s3.*.amazonaws.com}

          echo "bucket=$BUCKET_NAME" >> $GITHUB_OUTPUT
          echo "‚úÖ S3 Bucket: $BUCKET_NAME"

      - name: Sync static assets to S3 (long cache)
        run: |
          aws s3 sync . s3://${{ steps.get-bucket.outputs.bucket }}/ \
            --exclude ".git*" \
            --exclude "*.sh" \
            --exclude "*.md" \
            --exclude "index.html" \
            --delete \
            --cache-control "public, max-age=31536000"

      - name: Upload index.html (short cache)
        run: |
          aws s3 cp index.html s3://${{ steps.get-bucket.outputs.bucket }}/index.html \
            --cache-control "public, max-age=300" \
            --content-type "text/html"

      - name: Notify deployment start
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*[FRONTEND] üåê Starting CloudFront Deployment...*\nüü©üü©‚¨úÔ∏è Uploading to S3 and invalidating cache..."
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n   ‚òÅÔ∏è ‚òÅÔ∏è ‚òÅÔ∏è\n  ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ\n  ‚îÇ S3 >>> ‚îÇ\n  ‚îÇ CF >>> ‚îÇ\n  ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ\n UPLOADING...\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Invalidate CloudFront cache
        id: invalidate
        run: |
          INVALIDATION_ID=$(aws cloudfront create-invalidation \
            --distribution-id ${{ steps.find-cf.outputs.distribution_id }} \
            --paths "/*" \
            --query "Invalidation.Id" \
            --output text)

          echo "invalidation_id=$INVALIDATION_ID" >> $GITHUB_OUTPUT
          echo "‚úÖ Cache invalidation created: $INVALIDATION_ID"

      - name: Get CloudFront domain
        id: get-domain
        run: |
          DOMAIN=$(aws cloudfront get-distribution \
            --id ${{ steps.find-cf.outputs.distribution_id }} \
            --query "Distribution.DomainName" \
            --output text)

          echo "domain=$DOMAIN" >> $GITHUB_OUTPUT

      - name: Deployment summary
        run: |
          echo "======================================"
          echo "‚úÖ Frontend Deployment Complete"
          echo "======================================"
          echo "CloudFront URL: https://${{ steps.get-domain.outputs.domain }}"
          echo "Distribution ID: ${{ steps.find-cf.outputs.distribution_id }}"
          echo "S3 Bucket: ${{ steps.get-bucket.outputs.bucket }}"
          echo "Invalidation ID: ${{ steps.invalidate.outputs.invalidation_id }}"
          echo ""
          echo "‚è≥ Cache invalidation in progress (1-3 minutes)"

      - name: Notify deployment success
        if: success()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*[FRONTEND] ‚úÖ Deploy Complete*\nüü©üü©üü© Live on CloudFront"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n  ‚ú® ‚ú® ‚ú®\n ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n ‚ïë  üåê LIVE ‚ïë\n ‚ïë ON CLOUD ‚ïë\n ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n  ‚ú® ‚ú® ‚ú®\n```"
                }
              },
              {
                "type": "context",
                "elements": [
                  {
                    "type": "mrkdwn",
                    "text": "CloudFront URL: https://${{ steps.get-domain.outputs.domain }}\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|View Logs>"
                  }
                ]
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: Notify deployment failure
        if: failure()
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data '{
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "*[FRONTEND] üö® Deploy Failed*\n<https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}|Check Logs Now>"
                }
              },
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "```\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≤‚¢Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†Ñ‚†Ç‚¢â‚†§‚†ê‚†ã‚†à‚†°‚°à‚†â‚†ê‚††‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚¢†‚£§‚†î‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢¢‚†Ä‚†Ä‚†à‚†±‚°§‚£§‚†Ñ‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†∞‚†Å‚†Ä‚£∞‚£ø‚†É‚†Ä‚¢†‚†É‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†Ä‚†Ä‚†à‚¢û‚£¶‚°Ä‚†à‚°á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚¢á‚£†‚°ø‚†Å‚†Ä‚¢Ä‚°É‚†Ä‚£à‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¢‚†∞‚†Ä‚†Ä‚¢∫‚£ß‚¢∞‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†à‚£ø‚†Å‚°ò‚†Ä‚°å‚°á‚†Ä‚°ø‚†∏‚†Ä‚†Ä‚†Ä‚†à‚°ï‚°Ñ‚†Ä‚†ê‚°Ä‚†à‚†Ä‚¢É‚†Ä‚†Ä‚†æ‚†á‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†á‚°á‚†É‚¢†‚†Ä‚†∂‚°Ä‚°á‚¢É‚†°‚°Ä‚†Ä‚†Ä‚†°‚†à‚¢Ç‚°Ä‚¢Å‚†Ä‚°Å‚†∏‚†Ä‚°Ü‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†∏‚†Ä‚¢∏‚†Ä‚†ò‚°ú‚†Ä‚£ë‚¢¥‚£Ä‚†ë‚†Ø‚°Ç‚†Ñ‚£Ä‚££‚¢Ä‚£à‚¢∫‚°ú‚¢£‚†Ä‚°Ü‚°á‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†á‚†Ä‚¢∏‚†Ä‚°ó‚£∞‚°ø‚°ª‚†ø‚°≥‚°Ö‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚°µ‚†ø‚†ø‚°ª‚£∑‚°°‚°á‚°á‚†Ä‚¢∏‚£á‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚¢∞‚†Ä‚†Ä‚°Ü‚°Ñ‚£ß‚°è‚†∏‚¢†‚¢≤‚¢∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†ê‚¢ô‚¢∞‚†Ç‚¢°‚†ò‚£á‚°á‚†É‚†Ä‚†Ä‚¢π‚°Ñ‚†Ä‚†Ä\n‚†Ä‚†Ä‚†ü‚†Ä‚†Ä‚¢∞‚¢Å‚°á‚†á‚†∞‚£Ä‚¢Å‚°ú‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£Ä‚£Å‚†å‚†Ä‚†É‚†∞‚†Ä‚†Ä‚†Ä‚†à‚†∞‚†Ä‚†Ä\n‚†Ä‚°ò‚†Ä‚†Ä‚†Ä‚†Ä‚¢ä‚£§‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†§‚†Ñ‚†Ä‚¢∏‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†É‚†Ä\n‚¢†‚†Å‚¢Ä‚†Ä‚†Ä‚†Ä‚†à‚¢ø‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†Ä\n‚†ò‚†∏‚†ò‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚†Ä‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚†é‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Ä‚†Ä‚°á\n‚†Ä‚†á‚¢Ü‚¢É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°è‚¢≤‚¢§‚¢Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†Ñ‚°ö‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚†Ä‚†Ä\n‚¢∞‚†à‚¢å‚¢é‚¢Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚£å‚†Ü‚°∞‚°Å‚†â‚†â‚†Ä‚†â‚†Å‚°±‚°ò‚°º‚†á‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚¢¨‚†É‚¢†‚†Ä‚°Ü\n‚†Ä‚¢¢‚†Ä‚†ë‚¢µ‚£ß‚°Ä‚†Ä‚†Ä‚°ø‚†≥‚†Ç‚†â‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚¢∫‚°Ä‚†Ä‚†Ä‚¢Ä‚¢†‚£Æ‚†É‚¢Ä‚†Ü‚°∞‚†Ä\n‚†Ä‚†Ä‚†ë‚†Ñ‚£Ä‚†ô‚°≠‚†¢‚¢Ä‚°Ä‚†Ä‚†Å‚†Ñ‚£Ä‚£Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚°†‚†Ç‚¢É‚°Ä‚†î‚†±‚°û‚¢Å‚†Ñ‚£Å‚†î‚†Å‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä\n‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä\n```"
                }
              }
            ]
          }' \
          $SLACK_WEBHOOK_URL || true
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
